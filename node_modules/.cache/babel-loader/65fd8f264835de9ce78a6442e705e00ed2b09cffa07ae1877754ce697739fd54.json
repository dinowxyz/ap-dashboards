{"ast":null,"code":"var _jsxFileName = \"/home/parallels/code/astroport/astroport-dashboards/src/components/Dashboards/StatusReport/LiquidityPerDeployment/LiquidityPerDeployment.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport astroport from '../../../../assets/StatusReport/astroport.png';\nimport terra from '../../../../assets/StatusReport/terra.png';\nimport injective from '../../../../assets/StatusReport/injective.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiquidityPerDeployment = () => {\n  _s();\n  const [ltvData, setLtvData] = useState([]);\n  const chartRef = useRef();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        var _response$data;\n        const response = await axios.get('http://127.0.0.1:5001/api/data');\n        const data = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.ltv_data;\n        if (data) {\n          setLtvData(JSON.parse(data));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (!ltvData.length) return;\n    const width = 400;\n    const height = 400;\n    const outerRadius = Math.min(width, height) / 2;\n    const innerRadius = outerRadius * 0.7;\n    const arc = d3.arc().innerRadius(innerRadius).outerRadius(outerRadius);\n    const pie = d3.pie().value(d => d.totalLiquidityUsd);\n    const color = d3.scaleOrdinal().domain(['phoenix-1', 'injective-1']).range(['#534AF9', '#83FFCB']);\n    const svg = d3.select(chartRef.current);\n    svg.selectAll('*').remove();\n    const g = svg.append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n    const arcs = g.selectAll('.arc').data(pie(ltvData)).enter().append('g').attr('class', 'arc');\n    arcs.append('path').attr('d', arc).attr('fill', d => color(d.data.chainId)).attr('stroke', 'white').attr('stroke-width', 1).on('mouseover', function (event, d) {\n      d3.select(this).attr('fill', d => d3.color(color(d.data.chainId)).brighter(0.5));\n    }).on('mouseout', function (event, d) {\n      d3.select(this).attr('fill', d => color(d.data.chainId));\n    });\n    const line = d3.line().curve(d3.curveBasis);\n    const lineData = (startAngle, endAngle) => [arc.centroid({\n      startAngle,\n      endAngle\n    }), [arc.centroid({\n      startAngle,\n      endAngle\n    })[0] * 1.4, arc.centroid({\n      startAngle,\n      endAngle\n    })[1] * 1.4]];\n    arcs.append('path').attr('d', d => line(lineData(d.startAngle, d.endAngle))).attr('stroke', d => color(d.data.chainId)).attr('fill', 'none');\n    arcs.append('text').attr('x', d => arc.centroid(d)[0] * 1.5).attr('y', d => arc.centroid(d)[1] * 1.5).attr('text-anchor', 'middle').attr('fill', 'white').text(d => `${(d.data.totalLiquidityUsd * 1e-6).toFixed(1)}M`);\n    const logoScale = d3.scaleOrdinal().domain(['phoenix-1', 'injective-1']).range([terra, injective]);\n    arcs.append('image').attr('xlink:href', d => logoScale(d.data.chainId)).attr('x', d => arc.centroid(d)[0] * 0.85 - 15).attr('y', d => arc.centroid(d)[1] * 0.85 - 15).attr('width', 30).attr('height', 30);\n    g.append('image').attr('xlink:href', astroport).attr('x', -20).attr('y', -20).attr('width', 40).attr('height', 40);\n    const totalTvl = d3.sum(ltvData, d => d.totalLiquidityUsd);\n    g.append('text').attr('x', 0).attr('y', outerRadius + 20).attr('text-anchor', 'middle').attr('font-size', '1.25rem').attr('fill', 'white').text(`Total TVL: ${(totalTvl * 1e-6).toFixed(1)}M`);\n  }, [ltvData]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chart-container\",\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: chartRef,\n      width: 400,\n      height: 450\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 7\n  }, this);\n};\n_s(LiquidityPerDeployment, \"9I8wPnx6OOS0Bp6T9P0+jj+koHU=\");\n_c = LiquidityPerDeployment;\nexport default LiquidityPerDeployment;\nvar _c;\n$RefreshReg$(_c, \"LiquidityPerDeployment\");","map":{"version":3,"names":["React","useRef","useState","useEffect","axios","d3","astroport","terra","injective","jsxDEV","_jsxDEV","LiquidityPerDeployment","_s","ltvData","setLtvData","chartRef","fetchData","_response$data","response","get","data","ltv_data","JSON","parse","error","console","length","width","height","outerRadius","Math","min","innerRadius","arc","pie","value","d","totalLiquidityUsd","color","scaleOrdinal","domain","range","svg","select","current","selectAll","remove","g","append","attr","arcs","enter","chainId","on","event","brighter","line","curve","curveBasis","lineData","startAngle","endAngle","centroid","text","toFixed","logoScale","totalTvl","sum","className","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/parallels/code/astroport/astroport-dashboards/src/components/Dashboards/StatusReport/LiquidityPerDeployment/LiquidityPerDeployment.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport astroport from '../../../../assets/StatusReport/astroport.png';\nimport terra from '../../../../assets/StatusReport/terra.png';\nimport injective from '../../../../assets/StatusReport/injective.png';\n\nconst LiquidityPerDeployment = () => {\n  const [ltvData, setLtvData] = useState([]);\n  const chartRef = useRef();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('http://127.0.0.1:5001/api/data');\n        const data = response?.data?.ltv_data;\n        if (data) {\n          setLtvData(JSON.parse(data));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (!ltvData.length) return;\n\n    const width = 400;\n    const height = 400;\n    const outerRadius = Math.min(width, height) / 2;\n    const innerRadius = outerRadius * 0.7;\n    const arc = d3.arc().innerRadius(innerRadius).outerRadius(outerRadius);\n    const pie = d3.pie().value((d) => d.totalLiquidityUsd);\n    const color = d3.scaleOrdinal().domain(['phoenix-1', 'injective-1']).range(['#534AF9', '#83FFCB']);\n\n    const svg = d3.select(chartRef.current);\n    svg.selectAll('*').remove();\n\n    const g = svg.append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n\n    const arcs = g.selectAll('.arc').data(pie(ltvData)).enter().append('g').attr('class', 'arc');\n\n    arcs.append('path')\n      .attr('d', arc)\n      .attr('fill', (d) => color(d.data.chainId))\n      .attr('stroke', 'white')\n      .attr('stroke-width', 1)\n      .on('mouseover', function (event, d) {\n        d3.select(this).attr('fill', (d) => d3.color(color(d.data.chainId)).brighter(0.5));\n      })\n      .on('mouseout', function (event, d) {\n        d3.select(this).attr('fill', (d) => color(d.data.chainId));\n      });\n\n    const line = d3.line().curve(d3.curveBasis);\n    const lineData = (startAngle, endAngle) => [\n      arc.centroid({ startAngle, endAngle }),\n      [(arc.centroid({ startAngle, endAngle })[0] * 1.4), (arc.centroid({ startAngle, endAngle })[1] * 1.4)],\n    ];\n\n    arcs.append('path')\n      .attr('d', (d) => line(lineData(d.startAngle, d.endAngle)))\n      .attr('stroke', (d) => color(d.data.chainId))\n      .attr('fill', 'none');\n\n    arcs.append('text')\n      .attr('x', (d) => arc.centroid(d)[0] * 1.5)\n      .attr('y', (d) => arc.centroid(d)[1] * 1.5)\n      .attr('text-anchor', 'middle')\n      .attr('fill', 'white')\n      .text((d) => `${(d.data.totalLiquidityUsd * 1e-6).toFixed(1)}M`);\n\n      const logoScale = d3.scaleOrdinal().domain(['phoenix-1', 'injective-1']).range([terra, injective]);\n\n      arcs.append('image')\n        .attr('xlink:href', (d) => logoScale(d.data.chainId))\n        .attr('x', (d) => arc.centroid(d)[0] * 0.85 - 15)\n        .attr('y', (d) => arc.centroid(d)[1] * 0.85 - 15)\n        .attr('width', 30)\n        .attr('height', 30);\n      \n      g.append('image')\n        .attr('xlink:href', astroport)\n        .attr('x', -20)\n        .attr('y', -20)\n        .attr('width', 40)\n        .attr('height', 40);\n      \n      const totalTvl = d3.sum(ltvData, (d) => d.totalLiquidityUsd);\n      \n      g.append('text')\n        .attr('x', 0)\n        .attr('y', outerRadius + 20)\n        .attr('text-anchor', 'middle')\n        .attr('font-size', '1.25rem')\n        .attr('fill', 'white')\n        .text(`Total TVL: ${(totalTvl * 1e-6).toFixed(1)}M`);\n\n      }, [ltvData]);\n\n    return (\n      <div className=\"chart-container\">\n      <svg ref={chartRef} width={400} height={450}></svg>\n      </div>\n      );\n      };\n        \n  export default LiquidityPerDeployment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}