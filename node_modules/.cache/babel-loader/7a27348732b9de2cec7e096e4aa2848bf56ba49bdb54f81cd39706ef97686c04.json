{"ast":null,"code":"var _jsxFileName = \"/home/parallels/code/astroport/astroport-dashboards/src/components/Dashboards/StatusReport/LiquidityPerDeployment/LiquidityPerDeployment.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport astroport from '../../../../assets/StatusReport/astroport.png';\nimport terra from '../../../../assets/StatusReport/terra.png';\nimport injective from '../../../../assets/StatusReport/injective.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiquidityPerDeployment = () => {\n  _s();\n  const [ltvData, setLtvData] = useState([]);\n  const chartRef = useRef();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        var _response$data;\n        const response = await axios.get('http://127.0.0.1:5001/api/data');\n        const data = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.ltv_data;\n        if (data) {\n          setLtvData(JSON.parse(data));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (ltvData.length === 0 || !chartRef.current) {\n      return;\n    }\n    const svg = d3.select(chartRef.current);\n    svg.selectAll('*').remove();\n    const width = 400;\n    const height = 400;\n    const radius = Math.min(width, height) / 2;\n    const innerRadius = radius - 32;\n    const arc = d3.arc().outerRadius(radius).innerRadius(innerRadius);\n    const pie = d3.pie().startAngle(-Math.PI * 1.3 / 2).endAngle(Math.PI * 1.3 / 2).sort(null).value(d => d.totalLiquidityUsd);\n    const totalLiquidity = ltvData.reduce((acc, chain) => acc + chain.totalLiquidityUsd, 0);\n    const pieData = ltvData.map(chain => ({\n      ...chain,\n      totalLiquidityUsd: chain.totalLiquidityUsd / totalLiquidity,\n      color: chain.chainId === 'injective-1' ? '#83FFCB' : '#534AF9'\n    }));\n    const g = svg.append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n    const arcs = g.selectAll('.arc').data(pie(pieData)).enter().append('g').attr('class', 'arc');\n    arcs.append('path').attr('d', arc).attr('fill', d => d.data.color).on('mouseover', function () {\n      d3.selectAll('.arc').transition().duration(200).style('opacity', 0.7);\n      d3.select(this).transition().duration(200).style('opacity', 1);\n    }).on('mouseout', function () {\n      d3.selectAll('.arc').transition().duration(200).style('opacity', 1);\n    });\n    arcs.append('line').attr('x1', d => arc.centroid(d)[0] * 1.1).attr('y1', d => arc.centroid(d)[1] * 1.1).attr('x2', d => arc.centroid(d)[0] * 1.4).attr('y2', d => arc.centroid(d)[1] * 1.4).attr('stroke', d => d.data.color).attr('stroke-width', 2);\n    arcs.append('text').attr('x', d => arc.centroid(d)[0] * 1.5).attr('y', d => arc.centroid(d)[1] * 1.5).attr('text-anchor', 'middle').attr('fill', 'white').text(d => `${(d.data.totalLiquidityUsd * totalLiquidity).toFixed(1)}M`);\n    const image = svg.append('image').attr('xlink:href', astroport).attr('width', innerRadius).attr('height', innerRadius).attr('x', width / 2 - innerRadius / 2).attr('y', height / 2 - innerRadius / 2);\n    arcs.append('image').attr('xlink:href', d => d.data.chainId === 'injective-1' ? injective : terra).attr('width', 30).attr('height', 30).attr('x', d => arc.centroid(d)[0] * 0.85 + width / 2 - 15).attr('y', d => arc.centroid(d)[1] * 0.85 + height / 2 - 15);\n    const totalTVLText = svg.append('text').attr('x', width / 2).attr('y', height).attr('text-anchor', 'middle').attr('fill', 'white').text(`Total TVL: ${(totalLiquidity / 1000000).toFixed(1)}M`);\n  }, [ltvData, chartRef]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Liquidity per Deployment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: chartRef,\n      width: \"400\",\n      height: \"400\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n};\n_s(LiquidityPerDeployment, \"9I8wPnx6OOS0Bp6T9P0+jj+koHU=\");\n_c = LiquidityPerDeployment;\nexport default LiquidityPerDeployment;\nvar _c;\n$RefreshReg$(_c, \"LiquidityPerDeployment\");","map":{"version":3,"names":["React","useRef","useEffect","useState","axios","d3","astroport","terra","injective","jsxDEV","_jsxDEV","LiquidityPerDeployment","_s","ltvData","setLtvData","chartRef","fetchData","_response$data","response","get","data","ltv_data","JSON","parse","error","console","length","current","svg","select","selectAll","remove","width","height","radius","Math","min","innerRadius","arc","outerRadius","pie","startAngle","PI","endAngle","sort","value","d","totalLiquidityUsd","totalLiquidity","reduce","acc","chain","pieData","map","color","chainId","g","append","attr","arcs","enter","on","transition","duration","style","centroid","text","toFixed","image","totalTVLText","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","$RefreshReg$"],"sources":["/home/parallels/code/astroport/astroport-dashboards/src/components/Dashboards/StatusReport/LiquidityPerDeployment/LiquidityPerDeployment.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport astroport from '../../../../assets/StatusReport/astroport.png';\nimport terra from '../../../../assets/StatusReport/terra.png';\nimport injective from '../../../../assets/StatusReport/injective.png';\n\nconst LiquidityPerDeployment = () => {\n  const [ltvData, setLtvData] = useState([]);\n  const chartRef = useRef();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('http://127.0.0.1:5001/api/data');\n        const data = response?.data?.ltv_data;\n        if (data) {\n          setLtvData(JSON.parse(data));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (ltvData.length === 0 || !chartRef.current) {\n      return;\n    }\n\n    const svg = d3.select(chartRef.current);\n    svg.selectAll('*').remove();\n    const width = 400;\n    const height = 400;\n    const radius = Math.min(width, height) / 2;\n    const innerRadius = radius - 32;\n\n    const arc = d3.arc().outerRadius(radius).innerRadius(innerRadius);\n    const pie = d3.pie().startAngle(-Math.PI * 1.3 / 2).endAngle(Math.PI * 1.3 / 2).sort(null).value((d) => d.totalLiquidityUsd);\n\n    const totalLiquidity = ltvData.reduce((acc, chain) => acc + chain.totalLiquidityUsd, 0);\n    const pieData = ltvData.map((chain) => ({\n      ...chain,\n      totalLiquidityUsd: chain.totalLiquidityUsd / totalLiquidity,\n      color: chain.chainId === 'injective-1' ? '#83FFCB' : '#534AF9',\n    }));\n\n    const g = svg.append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n\n    const arcs = g.selectAll('.arc').data(pie(pieData)).enter().append('g').attr('class', 'arc');\n\n    arcs.append('path')\n      .attr('d', arc)\n      .attr('fill', (d) => d.data.color)\n      .on('mouseover', function () {\n        d3.selectAll('.arc').transition().duration(200).style('opacity', 0.7);\n        d3.select(this).transition().duration(200).style('opacity', 1);\n      })\n      .on('mouseout', function () {\n        d3.selectAll('.arc').transition().duration(200).style('opacity', 1);\n      });\n\n    arcs.append('line')\n      .attr('x1', (d) => arc.centroid(d)[0] * 1.1)\n      .attr('y1', (d) => arc.centroid(d)[1] * 1.1)\n      .attr('x2', (d) => arc.centroid(d)[0] * 1.4)\n      .attr('y2', (d) => arc.centroid(d)[1] * 1.4)\n      .attr('stroke', (d) => d.data.color)\n      .attr('stroke-width', 2);\n\n    arcs.append('text')\n      .attr('x', (d) => arc.centroid(d)[0] * 1.5)\n      .attr('y', (d) => arc.centroid(d)[1] * 1.5)\n      .attr('text-anchor', 'middle')\n      .attr('fill', 'white')\n      .text((d) => `${(d.data.totalLiquidityUsd * totalLiquidity).toFixed(1)}M`);\n\n    const image = svg\n      .append('image')\n      .attr('xlink:href', astroport)\n      .attr('width', innerRadius)\n      .attr('height', innerRadius)\n      .attr('x', width / 2 - innerRadius / 2)\n      .attr('y', height / 2 - innerRadius / 2);\n\n    arcs.append('image')\n      .attr('xlink:href', (d) => (d.data.chainId === 'injective-1' ? injective : terra))\n      .attr('width', 30)\n      .attr('height', 30)\n      .attr('x', (d) => arc.centroid(d)[0] * 0.85 + width / 2 - 15)\n      .attr('y', (d) => arc.centroid(d)[1] * 0.85 + height / 2 - 15);\n\n    const totalTVLText = svg\n      .append('text')\n      .attr('x', width / 2)\n      .attr('y', height)\n      .attr('text-anchor', 'middle')\n      .attr('fill', 'white')\n      .text(`Total TVL: ${(totalLiquidity / 1000000).toFixed(1)}M`);\n  }, [ltvData, chartRef]);\n\n  return (\n    <div>\n      <h3>Liquidity per Deployment</h3>\n      <svg ref={chartRef} width=\"400\" height=\"400\" />\n    </div>\n  );\n};\n\nexport default LiquidityPerDeployment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}