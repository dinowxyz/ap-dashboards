{"ast":null,"code":"var _jsxFileName = \"/home/parallels/code/astroport/astroport-dashboards/src/components/Dashboards/StatusReport/LiquidityPerDeployment/LiquidityPerDeployment.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport astroport from '../../../../assets/StatusReport/astroport.png';\nimport terra from '../../../../assets/StatusReport/terra.png';\nimport injective from '../../../../assets/StatusReport/injective.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiquidityPerDeployment = () => {\n  _s();\n  const [ltvData, setLtvData] = useState([]);\n  const chartRef = useRef();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        var _response$data;\n        const response = await axios.get('http://127.0.0.1:5001/api/data');\n        const data = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.ltv_data;\n        if (data) {\n          setLtvData(JSON.parse(data));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchData();\n  }, []);\n  useEffect(() => {\n    if (ltvData.length === 0 || !chartRef.current) {\n      return;\n    }\n    const svg = d3.select(chartRef.current);\n    svg.selectAll('*').remove();\n    const width = 400;\n    const height = 400;\n    const radius = Math.min(width, height) / 2;\n    const innerRadius = radius - 32;\n    const arc = d3.arc().outerRadius(radius).innerRadius(innerRadius);\n    const pie = d3.pie().startAngle(-Math.PI * 1.3 / 2).endAngle(Math.PI * 1.3 / 2).sort(null).value(d => d.totalLiquidityUsd);\n    const totalLiquidity = ltvData.reduce((acc, chain) => acc + chain.totalLiquidityUsd, 0);\n    const pieData = ltvData.map(chain => ({\n      ...chain,\n      totalLiquidityUsd: chain.totalLiquidityUsd / totalLiquidity,\n      color: chain.chainId === 'injective-1' ? '#83FFCB' : '#534AF9',\n      brighterColor: chain.chainId === 'injective-1' ? '#00FFC2' : '#0012FF'\n    }));\n    const g = svg.append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n    const arcs = g.selectAll('.arc').data(pie(pieData)).enter().append('g').attr('class', 'arc');\n    arcs.append('path').attr('d', arc).attr('fill', d => d.data.color).on('mouseover', function (d) {\n      d3.select(this).transition().duration(200).style('fill', d.data.brighterColor);\n    }).on('mouseout', function (d) {\n      d3.select(this).transition().duration(200).style('fill', d.data.color);\n    });\n    arcs.append('line').attr('x1', d => arc.centroid(d)[0] * 1.1).attr('y1', d => arc.centroid(d)[1] * 1.1).attr('x2', d => arc.centroid(d)[0] * 2).attr('y2', d => arc.centroid(d)[1] * 2).attr('stroke', d => d.data.color).attr('stroke-width', 2);\n    arcs.append('text').attr('x', d => arc.centroid(d)[0] * 2).attr('y', d => arc.centroid(d)[1] * 2).attr('text-anchor', 'middle').attr('dy', '0.35em').style('fill', 'white').text(d => `${(d.data.totalLiquidityUsd * 100).toFixed(2)}M`);\n    arcs.append('image').attr('xlink:href', d => d.data.chainId === 'injective-1' ? injective : terra).attr('x', d => arc.centroid(d)[0] * 2.5 - 10).attr('y', d => arc.centroid(d)[1] * 2.5 - 10).attr('width', 20).attr('height', 20);\n    g.append('image').attr('xlink:href', astroport).attr('x', -40).attr('y', -40).attr('width', 80).attr('height', 80);\n  }, [ltvData]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: chartRef,\n    viewBox: \"0 0 400 400\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 7\n  }, this);\n};\n_s(LiquidityPerDeployment, \"9I8wPnx6OOS0Bp6T9P0+jj+koHU=\");\n_c = LiquidityPerDeployment;\nexport default LiquidityPerDeployment;\nvar _c;\n$RefreshReg$(_c, \"LiquidityPerDeployment\");","map":{"version":3,"names":["React","useRef","useEffect","useState","axios","d3","astroport","terra","injective","jsxDEV","_jsxDEV","LiquidityPerDeployment","_s","ltvData","setLtvData","chartRef","fetchData","_response$data","response","get","data","ltv_data","JSON","parse","error","console","length","current","svg","select","selectAll","remove","width","height","radius","Math","min","innerRadius","arc","outerRadius","pie","startAngle","PI","endAngle","sort","value","d","totalLiquidityUsd","totalLiquidity","reduce","acc","chain","pieData","map","color","chainId","brighterColor","g","append","attr","arcs","enter","on","transition","duration","style","centroid","text","toFixed","ref","viewBox","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/parallels/code/astroport/astroport-dashboards/src/components/Dashboards/StatusReport/LiquidityPerDeployment/LiquidityPerDeployment.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport * as d3 from 'd3';\nimport astroport from '../../../../assets/StatusReport/astroport.png';\nimport terra from '../../../../assets/StatusReport/terra.png';\nimport injective from '../../../../assets/StatusReport/injective.png';\n\nconst LiquidityPerDeployment = () => {\n  const [ltvData, setLtvData] = useState([]);\n  const chartRef = useRef();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get('http://127.0.0.1:5001/api/data');\n        const data = response?.data?.ltv_data;\n        if (data) {\n          setLtvData(JSON.parse(data));\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (ltvData.length === 0 || !chartRef.current) {\n      return;\n    }\n\n    const svg = d3.select(chartRef.current);\n    svg.selectAll('*').remove();\n    const width = 400;\n    const height = 400;\n    const radius = Math.min(width, height) / 2;\n    const innerRadius = radius - 32;\n\n    const arc = d3.arc().outerRadius(radius).innerRadius(innerRadius);\n    const pie = d3.pie().startAngle(-Math.PI * 1.3 / 2).endAngle(Math.PI * 1.3 / 2).sort(null).value((d) => d.totalLiquidityUsd);\n\n    const totalLiquidity = ltvData.reduce((acc, chain) => acc + chain.totalLiquidityUsd, 0);\n    const pieData = ltvData.map((chain) => ({\n      ...chain,\n      totalLiquidityUsd: chain.totalLiquidityUsd / totalLiquidity,\n      color: chain.chainId === 'injective-1' ? '#83FFCB' : '#534AF9',\n      brighterColor: chain.chainId === 'injective-1' ? '#00FFC2' : '#0012FF',\n    }));\n\n    const g = svg.append('g').attr('transform', `translate(${width / 2}, ${height / 2})`);\n\n    const arcs = g.selectAll('.arc').data(pie(pieData)).enter().append('g').attr('class', 'arc');\n\n    arcs.append('path')\n      .attr('d', arc)\n      .attr('fill', (d) => d.data.color)\n      .on('mouseover', function (d) {\n        d3.select(this).transition().duration(200).style('fill', d.data.brighterColor);\n      })\n      .on('mouseout', function (d) {\n        d3.select(this).transition().duration(200).style('fill', d.data.color);\n      });\n\n    arcs.append('line')\n      .attr('x1', (d) => arc.centroid(d)[0] * 1.1)\n      .attr('y1', (d) => arc.centroid(d)[1] * 1.1)\n      .attr('x2', (d) => arc.centroid(d)[0] * 2)\n      .attr('y2', (d) => arc.centroid(d)[1] * 2)\n      .attr('stroke', (d) => d.data.color)\n      .attr('stroke-width', 2);\n\n      arcs.append('text')\n      .attr('x', (d) => arc.centroid(d)[0] * 2)\n      .attr('y', (d) => arc.centroid(d)[1] * 2)\n      .attr('text-anchor', 'middle')\n      .attr('dy', '0.35em')\n      .style('fill', 'white')\n      .text((d) => `${(d.data.totalLiquidityUsd * 100).toFixed(2)}M`);\n    \n    arcs.append('image')\n      .attr('xlink:href', (d) => (d.data.chainId === 'injective-1' ? injective : terra))\n      .attr('x', (d) => arc.centroid(d)[0] * 2.5 - 10)\n      .attr('y', (d) => arc.centroid(d)[1] * 2.5 - 10)\n      .attr('width', 20)\n      .attr('height', 20);\n    \n    g.append('image')\n      .attr('xlink:href', astroport)\n      .attr('x', -40)\n      .attr('y', -40)\n      .attr('width', 80)\n      .attr('height', 80);\n    }, [ltvData]);\n    \n    return (\n      <svg ref={chartRef} viewBox=\"0 0 400 400\"></svg>\n    );\n    };\n    \n    export default LiquidityPerDeployment;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}